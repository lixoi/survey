# Запускам
docker push postgres
docker run -d \
    --name pg \
    -e POSTGRES_PASSWORD=postgres \
    -e PGDATA=/var/lib/postgresql/data/pgdata \
    -v /Users/anthony/psqldata:/var/lib/postgresql/data \
    -p 5432:5432 \
    postgres

# Заходим в CLI
docker exec -it pg psql -Upostgres -dpostgres

# Создаем себе пользователя и БД
postgres=# create database calendar;
postgres=# create user usr with encrypted password 'calendar';
postgres=# grant all privileges on database calendar to usr;
postgres=# \c calendar postgres
postgres=# grant all on schema public to usr;

# Проверяем
docker exec -it pg psql -Uusr -dcalendar
\dt 
SELECT * FROM events;

# Создаем миграции
https://github.com/pressly/goose
go get -u github.com/pressly/goose/cmd/goose
goose -dir migrations create init sql

# Применяем миграции и проверяем
goose -dir migrations postgres "user=anthony password=anthony dbname=books sslmode=disable" up
docker exec pg psql -Uanthony -dbooks -c "\dt"
docker exec pg psql -Uanthony -dbooks -c "select * from books";

# Полезное
https://github.com/BurntSushi/toml
https://github.com/jackc/pgx
http://go-database-sql.org/errors.html
https://github.com/golang/go/issues/24329#issuecomment-373145906
